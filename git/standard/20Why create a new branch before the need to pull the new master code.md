# 为什么创建新分支前需要拉取最新master代码
# `发生过程`
### 发生情况
创建hotfix分支时未从最新mater中开出，而是从当前版本的上一个旧版本中开出紧急修复分支

### 发生描述
* 创建hotfix紧急修复分支时;
* 没有将master代码，pull到远端最新的代码;
 * （以下称呼`hotfix分支代码`与`远端主干`的差异为【差异的代码】）;
* 当时大家的功能分支都合并到此hotfix分支上;
* 合并完成后，直接把该hotfix分支提交上线;

# `危害`

### 危害范围

* 线上功能稳定性
* bug出错后，增加排查范围和成本

### 危害认识

#### 可能会导致线上功能回滚
* 如果当前所有需要紧急上线的功能分支，`都没有`从远端主干拉取最新的代码;
* 则会造成版本库中，hotfix分支代码与远端主干出现【差异的代码】
* 因此线上系统功能表现为hotfix代码版本，其中`并无`【差异的代码】实现的功能;
* 由此导致`最终用户`在操作线上系统时，出现`功能异常`或者`功能回滚`;

#### 出错后，增加研发人员排查成本
* 线上系统功能表现为：hotfix代码版本，其中并无【差异的代码】实现的功能;

* hotfix新上线功能的相关同事,`会关注`线上功能;
  * 在主动排查bug时;
  * (情形一)如果和【差异的代码】毫无关系，则不会增加排查成本;
  * (情形二) 如果和【差异的代码】有关，则会增加排查成本，同下(情形三);

* 【差异的代码】的相关同事，`不会关注`线上功能;
  * (情形三) 被其他人告知，在排查bug时，会增加`排查成本`和`心理负担`;
* `线下`排查的代码范围，`可能`会包含【差异的代码】;
* `线上`运行的代码，`不会`包含【差异的代码】;
* 导致认为要排查的`线上代码`和`线下实际排查`的代码有差异;
* 这种差异，很难被`直接感知`，造成排查错误`费时费力`;

# `解决方案`
* 如果已创建了不是从最新master开出的hotfix分支;
* `通知其他同事禁止向此分支合并`;
* 锁定该hotfix分支;
* 切换到主干
* `重新执行以下两步操作`

>$ git fetch origin -p 

>$ git pull --ff-only;

* 从最新主干开出hotfix分支;
* 合并要紧急上线的开发分支;

# `如何避免忘记执行pull远端最新代码`
* 一定要严格按照wiki文档执行，不能过于相信自己的记忆力;
